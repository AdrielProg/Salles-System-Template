@using SallesApp.Helpers
@model ProductListViewModel

<div class="container">
    <div class="mb-3">
        <h4>Filtrar por categoria:</h4>
        <ul class="list-group list-group-horizontal">
            <li class="list-group-item">
                <a asp-controller="Product" asp-action="List" class="text-decoration-none">
                    Todas as Categorias
                </a>
            </li>
            @foreach (var category in Model.Categories)
            {
                string encryptedCategoryId = EncryptionHelper.Encrypt(category.Id.ToString());
                string encodedCategoryId = Uri.EscapeDataString(encryptedCategoryId);

                <li class="list-group-item">
                    <a asp-controller="Product" asp-action="List" asp-route-categoryId="@encodedCategoryId"
                       class="text-decoration-none">
                        @category.Name
                    </a>
                </li>
            }
        </ul>
    </div>
    <div>
        <h2 class="text-primary">@Model.CurrentCategory</h2>
    </div>
    <div class="container">
        <div class="row">
            @foreach (var product in Model.Products)
            {
                <partial name="_ProductResume" for="@product" />
            }
        </div>
    </div>
</div>